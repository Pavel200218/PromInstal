function t_throttle(fn, threshhold, scope) {
    var last;
    var deferTimer;
    threshhold || (threshhold = 250);
    return function () {
        var context = scope || this;
        var now = +new Date();
        var args = arguments;
        if (last && now < last + threshhold) {
            clearTimeout(deferTimer);
            deferTimer = setTimeout(function () {
                last = now;
                fn.apply(context, args);
            }, threshhold);
        } else {
            last = now;
            fn.apply(context, args);
        }
    };
}
function t446_init(recid) {
    var rec = document.getElementById("rec" + recid);
    if (!rec) return;
    var linkItems = rec.querySelectorAll(".t-menu__link-item");
    var subMenuLinks = rec.querySelectorAll(".t-menusub__link-item");
    var menu = rec.querySelector(".t446");
    Array.prototype.forEach.call(linkItems, function (link) {
        link.addEventListener("click", function () {
            if (
                link.classList.contains("t-menusub__target-link") ||
                link.classList.contains("tooltipstered") ||
                link.classList.contains("t794__tm-link") ||
                link.classList.contains("t966__tm-link") ||
                link.classList.contains("t978__tm-link")
            )
                return;
            t446_hideMenuOnMobile(link, rec);
        });
    });
    Array.prototype.forEach.call(subMenuLinks, function (subMenuLink) {
        subMenuLink.addEventListener("click", function () {
            t446_hideMenuOnMobile(subMenuLink, rec);
        });
    });
}
function t446_setLogoPadding(recid) {
    var rec = document.getElementById("rec" + recid);
    if (!rec || window.innerWidth <= 980) return;
    var menu = rec.querySelector(".t446");
    var logo = menu ? menu.querySelector(".t446__logowrapper") : null;
    var logoWidth = logo ? logo.offsetWidth : 0;
    var leftWrapper = menu ? menu.querySelector(".t446__leftwrapper") : null;
    var rightWrapper = menu ? menu.querySelector(".t446__rightwrapper") : null;
    if (leftWrapper) leftWrapper.style.paddingRight = logoWidth / 2 + 50 + "px";
    if (rightWrapper) rightWrapper.style.paddingLeft = logoWidth / 2 + 50 + "px";
}
function t446_checkOverflow(recid, menuheight) {
    var rec = document.getElementById("rec" + recid);
    var menu = rec ? rec.querySelector(".t446") : null;
    if (!menu) return;
    var rightWrapper = menu.querySelector(".t446__rightwrapper");
    var rightMenuWrap = rightWrapper ? rightWrapper.querySelector(".t446__rightmenuwrapper") : null;
    var additionalWrap = rightWrapper ? rightWrapper.querySelector(".t446__additionalwrapper") : null;
    var burgerWrapOverflow = rightWrapper ? rightWrapper.querySelector(".t446__burgerwrapper_overflow") : null;
    var burgerWrap = rightWrapper ? rightWrapper.querySelector(".t446__burgerwrapper_withoutoverflow") : null;
    var rightWrapperWidth = t446_getPureWidth(rightWrapper);
    var rightMenuWrapWidth = rightMenuWrap ? rightMenuWrap.offsetWidth : 0;
    var additionalWrapWidth = additionalWrap ? additionalWrap.offsetWidth : 0;
    var additionalWrapFloating = additionalWrap ? additionalWrap.style.float || window.getComputedStyle(additionalWrap).float : "";
    var blockHeight = menuheight > 0 ? menuheight : 80;
    if (window.innerWidth > 980 && rightMenuWrapWidth + additionalWrapWidth > rightWrapperWidth) {
        menu.style.height = blockHeight * 2 + "px";
        if (additionalWrap) additionalWrap.style.float = "right";
        if (burgerWrapOverflow) burgerWrapOverflow.style.display = "table-cell";
        if (burgerWrap) burgerWrap.style.display = "none";
    } else {
        if (menu.offsetHeight > blockHeight) menu.style.height = blockHeight + "px";
        if (additionalWrap && additionalWrapFloating === "right") additionalWrap.style.float = "none";
        if (burgerWrapOverflow) burgerWrapOverflow.style.display = "none";
        if (burgerWrap) burgerWrap.style.display = "table-cell";
    }
}
function t446_getPureWidth(el) {
    if (!el) return 0;
    var elWidth = el.offsetWidth;
    var elPaddingLeft = parseInt(window.getComputedStyle(el).paddingLeft, 10) || 0;
    var elPaddingRight = parseInt(window.getComputedStyle(el).paddingRight, 10) || 0;
    var width = elWidth - (elPaddingLeft + elPaddingRight);
    return width > 0 ? width : 0;
}
function t446_createMobileMenu(recid) {
    var rec = document.getElementById("rec" + recid);
    if (!rec) return;
    t_onFuncLoad("t_menu__createMobileMenu", function () {
        t_menu__createMobileMenu(recid, ".t446");
    });
    var linkItems = rec.querySelectorAll(".t-menu__link-item");
    var submenuClassList = ["t978__menu-link_hook", "t978__tm-link", "t966__tm-link", "t794__tm-link", "t-menusub__target-link"];
    Array.prototype.forEach.call(linkItems, function (link) {
        link.addEventListener("click", function () {
            var isSubmenuHook = submenuClassList.some(function (submenuClass) {
                return link.classList.contains(submenuClass);
            });
            if (isSubmenuHook) return;
            t446_hideMenuOnMobile(link, rec);
        });
    });
    var wrappersLinks = rec.querySelectorAll(".t446__logowrapper2 a, .t446__right_buttons_wrap a");
    Array.prototype.forEach.call(wrappersLinks, function (link) {
        link.addEventListener("click", function () {
            t446_hideMenuOnMobile(link, rec);
        });
    });
}
function t446_hideMenuOnMobile(link, rec) {
    if (!rec || !link || window.innerWidth >= 980) return !1;
    var url = link.href ? link.href.trim() : "";
    var menu = rec.querySelector(".t446");
    var burger = rec.querySelector(".tmenu-mobile");
    if (url && link.matches('[href*="#"]')) {
        if (burger) burger.classList.remove("tmenu-mobile_opened");
        if (menu) {
            if (menu.classList.contains("t446__positionabsolute") || (burger && !burger.classList.contains(".tmenu-mobile_positionfixed"))) {
                menu.style.display = "none";
                menu.style.opacity = "0";
            } else {
                t_onFuncLoad("t_menu__FadeOut", function () {
                    t_menu__FadeOut(menu, 300);
                });
            }
        }
    }
}
function t1014_initPopup(recId) {
    var rec = document.getElementById("rec" + recId);
    if (!rec) return;
    var container = rec.querySelector(".t1014");
    if (!container) return;
    rec.setAttribute("data-animationappear", "off");
    rec.setAttribute("data-popup-subscribe-inited", "y");
    rec.style.opacity = 1;
    var documentBody = document.body;
    var hrefs = rec.querySelectorAll('a[href*="#"]');
    var popup = rec.querySelector(".t-popup");
    var popupCloseBtn = popup.querySelector(".t-popup__close");
    var popupTooltipHook = popup.getAttribute("data-tooltip-hook");
    var analitics = popup.getAttribute("data-track-popup");
    if (popupTooltipHook) {
        t_onFuncLoad("t_popup__addAttributesForAccessibility", function () {
            t_popup__addAttributesForAccessibility(popupTooltipHook);
        });
        document.addEventListener("click", function (event) {
            var target = event.target;
            var href = target.closest('a[href="' + popupTooltipHook + '"]') ? target : !1;
            if (!href) return;
            event.preventDefault();
            t1014_createPopup(recId);
            t_onFuncLoad("t_popup__resizePopup", function () {
                t_popup__resizePopup(recId);
            });
            t1014__lazyLoad();
            if (analitics && window.Tilda) {
                Tilda.sendEventToStatistics(analitics, popupTooltipHook);
            }
        });
        t_onFuncLoad("t_popup__addClassOnTriggerButton", function () {
            t_popup__addClassOnTriggerButton(document, popupTooltipHook);
        });
    }
    popup.addEventListener(
        "scroll",
        t_throttle(function () {
            t1014__lazyLoad();
        })
    );
    popup.addEventListener("click", function (event) {
        if (event.target === this) t1014_closePopup();
    });
    popupCloseBtn.addEventListener("click", t1014_closePopup);
    for (var i = 0; i < hrefs.length; i++) {
        hrefs[i].addEventListener("click", function () {
            var url = this.getAttribute("href");
            if (!url || (url.substring(0, 7) != "#price:" && url.substring(0, 7) != "#order:")) {
                t1014_closePopup();
                if (!url || url.substring(0, 7) == "#popup:") {
                    setTimeout(function () {
                        documentBody.classList.add("t-body_popupshowed");
                    }, 300);
                }
            }
        });
    }
}
function t1014_lockScroll() {
    var documentBody = document.body;
    if (!documentBody.classList.contains("t-body_scroll-locked")) {
        var bodyScrollTop = typeof window.pageYOffset !== "undefined" ? window.pageYOffset : (document.documentElement || documentBody.parentNode || documentBody).scrollTop;
        documentBody.classList.add("t-body_scroll-locked");
        documentBody.style.top = "-" + bodyScrollTop + "px";
        documentBody.setAttribute("data-popup-scrolltop", bodyScrollTop);
    }
}
function t1014_unlockScroll() {
    var documentBody = document.body;
    if (documentBody.classList.contains("t-body_scroll-locked")) {
        var bodyScrollTop = documentBody.getAttribute("data-popup-scrolltop");
        documentBody.classList.remove("t-body_scroll-locked");
        documentBody.style.top = null;
        documentBody.removeAttribute("data-popup-scrolltop");
        document.documentElement.scrollTop = parseInt(bodyScrollTop);
    }
}
function t1014_createPopup(recId) {
    var rec = document.getElementById("rec" + recId);
    if (!rec) return;
    var container = rec.querySelector(".t1014");
    if (!container) return;
    var popup = rec.querySelector(".t-popup");
    var documentBody = document.body;
    t_onFuncLoad("t_popup__showPopup", function () {
        t_popup__showPopup(popup);
    });
    documentBody.classList.add("t-body_popupshowed");
    documentBody.classList.add("t1014__body_popupshowed");
    if (/iPhone|iPad|iPod/i.test(navigator.userAgent) && !window.MSStream) {
        setTimeout(function () {
            t1014_lockScroll();
        }, 500);
    }
    document.addEventListener("keydown", t1014_escClosePopup);
}
function t1014_escClosePopup(event) {
    if (event.key === "Escape") t1014_closePopup();
}
function t1014_closePopup() {
    var popupAll = document.querySelectorAll(".t-popup");
    document.body.classList.remove("t-body_popupshowed");
    document.body.classList.remove("t1014__body_popupshowed");
    for (var i = 0; i < popupAll.length; i++) {
        popupAll[i].classList.remove("t-popup_show");
    }
    if (/iPhone|iPad|iPod/i.test(navigator.userAgent) && !window.MSStream) {
        t1014_unlockScroll();
    }
    t_onFuncLoad("t_popup__addFocusOnTriggerButton", function () {
        t_popup__addFocusOnTriggerButton();
    });
    setTimeout(function () {
        var popupHide = document.querySelectorAll(".t-popup:not(.t-popup_show)");
        for (var i = 0; i < popupHide.length; i++) {
            popupHide[i].style.display = "none";
        }
    }, 300);
    document.removeEventListener("keydown", t1014_escClosePopup);
}
function t1014__lazyLoad() {
    var allRecords = document.getElementById("allrecords");
    if (window.lazy === "y" || (allRecords && allRecords.getAttribute("data-tilda-lazy") === "yes")) {
        t_onFuncLoad("t_lazyload_update", function () {
            t_lazyload_update();
        });
    }
}
function t1014_onSuccess(form) {
    t_onFuncLoad("t_forms__onSuccess", function () {
        t_forms__onSuccess(form);
    });
}
function t486_setHeight(recId) {
    var rec = document.getElementById("rec" + recId);
    if (!rec) return;
    var textWrapper = rec.querySelector(".t486__textwrapper");
    if (!textWrapper) return;
    var images = rec.querySelectorAll(".t486__blockimg");
    var imageContainer = rec.querySelector(".t486__imgcontainer");
    var imageHeight = images[0].clientWidth;
    if (window.innerWidth > 980) {
        for (var i = 0; i < images.length; i++) {
            images[i].style.height = imageHeight + "px";
        }
        textWrapper.style.height = imageContainer.clientWidth + "px";
    } else {
        var imageStyle = getComputedStyle(images[0], null);
        var imagePaddingLeft = parseInt(imageStyle.paddingLeft) || 0;
        var imagePaddingRight = parseInt(imageStyle.paddingRight) || 0;
        var imageWidth = images[0].clientWidth - (imagePaddingLeft + imagePaddingRight);
        for (var i = 0; i < images.length; i++) {
            images[i].style.height = imageWidth + "px";
        }
        textWrapper.style.height = "auto";
    }
}
function t490_init(recId) {
    t_onFuncLoad("t_card__moveClickOnCard", function () {
        t_card__moveClickOnCard(recId);
    });
    t_onFuncLoad("t_card__addFocusOnTab", function () {
        t_card__addFocusOnTab(recId);
    });
}
function t670_init(recid) {
    t670_imageHeight(recid);
    t670_show(recid);
    t670_hide(recid);
}
function t670_show(recid) {
    var rec = document.getElementById("rec" + recid);
    if (!rec) return;
    var playBtns = rec.querySelectorAll(".t670__play");
    Array.prototype.forEach.call(playBtns, function (play) {
        play.addEventListener("click", function () {
            var videoType = play.getAttribute("data-slider-video-type");
            var url;
            var nextEl;
            var prevEl;
            var iframe;
            var video;
            var source;
            switch (videoType) {
                case "youtube":
                    url = play.getAttribute("data-slider-video-url");
                    nextEl = play.nextElementSibling;
                    prevEl = play.previousElementSibling.previousElementSibling;
                    if (nextEl) {
                        iframe = document.createElement("iframe");
                        iframe.classList.add("t670__iframe");
                        iframe.width = "100%";
                        iframe.height = "100%";
                        iframe.src = "https://www.youtube.com/embed/" + url + "?autoplay=1&enablejsapi=1";
                        iframe.frameBorder = "0";
                        iframe.setAttribute("webkitallowfullscreen", "");
                        iframe.setAttribute("mozallowfullscreen", "");
                        iframe.setAttribute("allowfullscreen", "");
                        iframe.setAttribute("allow", "autoplay");
                        nextEl.innerHTML = "";
                        nextEl.insertAdjacentElement("beforeend", iframe);
                    }
                    if (prevEl && prevEl.classList.contains("t-bgimg")) prevEl.style.opacity = "0";
                    break;
                case "vimeo":
                    url = play.getAttribute("data-slider-video-url");
                    nextEl = play.nextElementSibling;
                    prevEl = play.previousElementSibling.previousElementSibling;
                    var idMatch = /vimeo[^/]*\/(\d+)\/?(\w*)\/?/i.exec(url);
                    var id = idMatch ? idMatch[1] : null;
                    var hash = idMatch ? "?h=" + idMatch[2] : null;
                    if (nextEl) {
                        iframe = document.createElement("iframe");
                        iframe.classList.add("t670__iframe");
                        iframe.width = "100%";
                        iframe.height = "100%";
                        iframe.src = "https://player.vimeo.com/video/" + id + hash + "&amp;api=1";
                        iframe.frameBorder = "0";
                        iframe.setAttribute("allowfullscreen", "");
                        iframe.setAttribute("allow", "autoplay; fullscreen");
                        nextEl.innerHTML = "";
                        nextEl.insertAdjacentElement("beforeend", iframe);
                    }
                    if (prevEl && prevEl.classList.contains("t-bgimg")) prevEl.style.opacity = "0";
                    break;
                case "mp4":
                    url = play.getAttribute("data-slider-video-url");
                    nextEl = play.nextElementSibling;
                    prevEl = play.previousElementSibling.previousElementSibling;
                    if (nextEl) {
                        video = document.createElement("video");
                        source = document.createElement("source");
                        video.insertAdjacentElement("beforeend", source);
                        video.classList.add("t670__video");
                        video.controls = !0;
                        source.src = url;
                        nextEl.innerHTML = "";
                        nextEl.insertAdjacentElement("beforeend", video);
                        video = nextEl.querySelector("video");
                        if (video) video.play();
                    }
                    if (prevEl && prevEl.classList.contains("t-bgimg")) prevEl.style.opacity = "0";
                    break;
            }
            if (nextEl) nextEl.style.zIndex = "3";
        });
    });
}
function t670_hide(recid) {
    var rec = document.getElementById("rec" + recid);
    if (!rec) return;
    var elBody = rec.querySelector(".t670__frame");
    rec.addEventListener("updateSlider", function () {
        if (elBody) elBody.innerHTML = "";
        if (elBody) elBody.style.zIndex = "";
    });
}
function t670_imageHeight(recid) {
    var rec = document.getElementById("rec" + recid);
    if (!rec) return;
    var images = rec.querySelectorAll(".t670__separator");
    Array.prototype.forEach.call(images, function (img) {
        var width = img.getAttribute("data-slider-image-width") || 0;
        var height = img.getAttribute("data-slider-image-height") || 0;
        var ratio = height / width;
        var padding = ratio * 100;
        img.style.paddingBottom = padding + "%";
    });
}
function t142_checkSize(recId) {
    var rec = document.getElementById("rec" + recId);
    if (!rec) return;
    var button = rec.querySelector(".t142__submit");
    if (!button) return;
    var buttonStyle = getComputedStyle(button, null);
    var buttonPaddingTop = parseInt(buttonStyle.paddingTop) || 0;
    var buttonPaddingBottom = parseInt(buttonStyle.paddingBottom) || 0;
    var buttonHeight = button.clientHeight - (buttonPaddingTop + buttonPaddingBottom) + 5;
    var textHeight = button.scrollHeight;
    if (buttonHeight < textHeight) {
        button.classList.add("t142__submit-overflowed");
    }
}
function t433_init(recid) {
    var rec = document.querySelector("#rec" + recid);
    if (!rec) return;
    var separateMap = document.querySelector("#separateMap" + recid);
    if (separateMap) separateMap.style.height = "auto";
    t433_setMapHeight(recid);
    var mapWrapper = rec.querySelector(".t433");
    if (!mapWrapper) return;
    mapWrapper.addEventListener("displayChanged", function () {
        t433_setMapHeight(recid);
    });
    window.addEventListener(
        "resize",
        t_throttle(function () {
            t433_setMapHeight(recid);
        })
    );
}
function t433_setMapHeight(recid) {
    var rec = document.querySelector("#rec" + recid);
    if (!rec) return;
    var mapElement = rec.querySelector(".t433__map");
    var textElement = rec.querySelector(".t433__col_text");
    if (!mapElement || !textElement) return;
    var paddingTop = parseInt(textElement.style.paddingTop, 10) || 0;
    var paddingBottom = parseInt(textElement.style.paddingBottom, 10) || 0;
    var textHeight = textElement.clientHeight - (paddingTop + paddingBottom);
    mapElement.style.height = textHeight + "px";
    var event = document.createEvent("HTMLEvents");
    event.initEvent("sizechange", !0, !1);
    mapElement.dispatchEvent(event);
}
function t674_init(recid) {
    var rec = document.getElementById("rec" + recid);
    if (!rec) return;
    var backgroundImage = rec.querySelector(".t674__img-holder");
    if (!backgroundImage) return;
    backgroundImage.onload = function () {
        var delay = 0;
        var allRecords = document.getElementById("allrecords");
        if (allRecords.getAttribute("data-blocks-animationoff") !== "yes") {
            delay = 600;
        }
        setTimeout(function () {
            document.body.classList.add("t674__body_with-bg");
        }, delay);
    };
    var event = document.createEvent("HTMLEvents");
    event.initEvent("load", !0, !1);
    backgroundImage.dispatchEvent(event);
}
